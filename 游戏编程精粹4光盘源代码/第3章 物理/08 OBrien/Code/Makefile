# Copyright (c) 2003, University of California at Berkeley
# All rights reserved.
# 
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions are
# met:
# 
#     * Redistributions of source code must retain the above copyright
#       notice, this list of conditions and the following disclaimer.
# 
#     * Redistributions in binary form must reproduce the above
#       copyright notice, this list of conditions and the following
#       disclaimer in the documentation and/or other materials provided
#       with the distribution.
# 
#     * Neither the name of the University of California nor the names
#       of its contributors may be used to endorse or promote products
#       derived from this software without specific prior written
#       permission.
# 
# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
# "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
# LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
# A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
# OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
# SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
# LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
# DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
# THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
# (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
# OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

# This file generated by Kris Hauser


BIN = ../bin/
SRC = ./

# CC should be set to the name of your favorite C++ compiler.

CC = gcc

RM = /bin/rm



##########################################################################
### Files and Paths - this is probably the only section you'll need to change
##########################################################################


# set this to the glut path
GLUT		= $(HOME)/glut-3.7

# Numerical Recipes SVD routine: either set NRDIR to the correct
# directory, or set NRFILES to whatever files you'd like to include
# to define the svdcmp routine. 

# set this to the Numerical Recipies dir 
NRDIR		= ./nRecipies

# set this to the Numerical Recipies files you need (svdcmp.c, nrutil.c, pythag.c) 
# you will also need nrutil.h 
NRFILES         = $(NRDIR)/svdcmp.c $(NRDIR)/nrutil.c $(NRDIR)/pythag.c


##########################################################################
### The rest...
##########################################################################


CSWITCHES = -O3  

# The source files for the project.
# get all cpp source files
SRCS		+= $(wildcard *.cpp)
# get all c source files
SRCS		+= $(wildcard *.c)
SRCS		+= $(wildcard *.C)
#SRCS		+= $(foreach DIR,$(SRCDIRS),$(subst $(DIR)/,,$(wildcard $(DIR)/*.cpp)))
#SRCS		+= $(foreach DIR,$(SRCDIRS),$(subst $(DIR)/,,$(wildcard $(DIR)/*.c)))
#SRCS		+= $(foreach DIR,$(SRCDIRS),$(subst $(DIR)/,,$(wildcard $(DIR)/*.C)))
SRCS		+= $(wildcard simulation/*.cpp)
SRCS		+= $(wildcard shared/*.cpp)
SRCS		+= $(wildcard modal/*.cpp)
SRCS		+= $(wildcard math/*.cpp)

# Additional objects to link. Only add things that aren't built from SRCS!
OBJS 		+= 

# Additional libs to link with.
LIBS		+= GL GLU glut stdc++



# Additional locations for header files
#INCDIRS		+= $(GL)/include/
INCDIRS		+= $(GLUT)/include
INCDIRS		+= .
INCDIRS		+= modal
INCDIRS		+= shared

#use CLAPACK for SVD stuff
#DEFINES += USE_CLAPACK
#LIBS 	+= lapack_LINUX blas_LINUX F77 I77
#INCDIRS += $(HOME)/CLAPACK $(HOME)/CLAPACK/F2CLIBS $(HOME)/CLAPACK/BLAS/WRAP
#LIBDIRS += $(HOME)/CLAPACK $(HOME)/CLAPACK/F2CLIBS

# Additional locations for library files
LIBDIRS			+= $(GLUT)/lib/glut
LIBDIRS			+= .

# Additional locations for source files
SRCDIRS		= simulation shared math modal

#DEFINES += MATH_DOUBLE

# The action starts here.

#INCDIRS += /usr/lib/gcc-lib/i386-redhat-linux/2.96/include/ .

all: simulate

.cpp.o: 
	$(CC) $(CSWITCHES) -c $<

simulate: $(OBJS)
	$(CC) $(CSWITCHES) $(SRCS) $(addprefix -l, $(LIBS)) $(addprefix -L, $(LIBDIRS)) $(addprefix -I, $(INCDIRS)) $(NRFILES) $(addprefix -D, $(DEFINES)) -o simulate

deform:

clean:
	$(RM) $(SRC)*.o
