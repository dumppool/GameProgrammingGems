//--------------------------------------------------------------------------------------------------------------------//
//                                                ENGINE CLASS                                                        //
// written by Frederic My                                                                                             //
// fmy@fairyengine.com                                                                                                //
//--------------------------------------------------------------------------------------------------------------------//

//----------------------------------------------- INCLUDES -----------------------------------------------------------//

#include  "stdafx.h"
#include  "Engine.h"

#include  "RendererDX8.h"

namespace GPG4
{

//--------------------------------------------------------------------------------------------------------------------//

//--------------------------------------------------------------------------------------------------------------------//
//                                                CONSTRUCTORS / DESTRUCTOR                                           //
//--------------------------------------------------------------------------------------------------------------------//

CEngine::CEngine()
  {}

CEngine::~CEngine()
  {}

//--------------------------------------------------------------------------------------------------------------------//
//                                                 GET/SET                                                            //
//--------------------------------------------------------------------------------------------------------------------//

CEngine* CEngine::GetEngine()
  {
  static CEngine Engine;
  return &Engine;
  }

//

IRenderer* CEngine::GetRenderer() const
  {
  return m_spRenderer;
  }

//--------------------------------------------------------------------------------------------------------------------//
//                                                 RENDERER                                                           //
//--------------------------------------------------------------------------------------------------------------------//

//----------------------------------------------- CreateRenderer -----------------------------------------------------//
// create & init renderer
// in : window handle,flags,width(=0) & height(=0)
// out: OK ?
//--------------------------------------------------------------------------------------------------------------------//

bool CEngine::CreateRenderer(const HWND hWnd,const u32 u32Flags,const u32 u32Width,const u32 u32Height)
  {
  IRendererSP spRenderer = new CRendererDX8;
  if(!spRenderer) return false;

  if(!spRenderer->Create(hWnd,u32Flags,u32Width,u32Height)) return false;
  m_spRenderer = spRenderer;
  return true;
  }

//----------------------------------------------- ReleaseRenderer ----------------------------------------------------//
// decrement ref counter
// in :
// out:
//--------------------------------------------------------------------------------------------------------------------//

void CEngine::ReleaseRenderer()
  {
  m_spRenderer = NULL;
  }

//--------------------------------------------------------------------------------------------------------------------//

} // namespace
