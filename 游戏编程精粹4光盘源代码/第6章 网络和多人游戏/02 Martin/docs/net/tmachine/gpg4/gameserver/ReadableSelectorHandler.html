<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2) on Fri Aug 29 23:40:07 GMT 2003 -->
<TITLE>
ReadableSelectorHandler
</TITLE>

<META NAME="keywords" CONTENT="net.tmachine.gpg4.gameserver.ReadableSelectorHandler class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="ReadableSelectorHandler";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../net/tmachine/gpg4/gameserver/PlainWritableSelectorHandler.html" title="class in net.tmachine.gpg4.gameserver"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../net/tmachine/gpg4/gameserver/RequestProcessor.html" title="class in net.tmachine.gpg4.gameserver"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ReadableSelectorHandler.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
net.tmachine.gpg4.gameserver</FONT>
<BR>
Class ReadableSelectorHandler</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by"><B>net.tmachine.gpg4.gameserver.ReadableSelectorHandler</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../net/tmachine/gpg4/gameserver/iReadableSelectorHandler.html" title="interface in net.tmachine.gpg4.gameserver">iReadableSelectorHandler</A>, <A HREF="../../../../net/tmachine/gpg4/gameserver/iSelectorHandler.html" title="interface in net.tmachine.gpg4.gameserver">iSelectorHandler</A>, java.lang.Runnable</DD>
</DL>
<HR>
<DL>
<DT>public class <B>ReadableSelectorHandler</B><DT>extends java.lang.Object<DT>implements <A HREF="../../../../net/tmachine/gpg4/gameserver/iReadableSelectorHandler.html" title="interface in net.tmachine.gpg4.gameserver">iReadableSelectorHandler</A>, java.lang.Runnable</DL>

<P>
Note; this class takes a single RequestProcessor object as argument to the constructor. Normally, you would
 use some other means of getting a RequestProcessor instance dynamically, depending upon the actual data
 in the HTTPRequest.
<P>
 This class starts it's thread using the GlobalErrorLoggingThreadGroup, so it is safe to be used as a PRIMARY
 thread (c.f. GlobalErrorLoggingThreadGroup)
 <P>
 <h4>Bugs in Sun's version of Java</h4>
 Java.nio is relatively new, but has been around for close to two years now. Nevertheless, Sun still haven't finished
 getting their implementations to work, and there are several outstanding bugs (most of which are visible and
 trackable via Sun's free online bug-tracking system, the "Java Developer Connection (JDC)" - although for some
 reason (probably marketing people wanting statistics and email addresses), you have to register for a free ID. This
 is annoying enough to put many people off, so the quality of comments is not very high, but you can find plenty
 of detail on current status etc.
<P>
 The bugs that affect this class include:
 <ul>
 <li> When registering for OP_READ with a Selector, unless you also register for OP_WRITE,
 you will NOT receive notification of "Socket disconnected / connection dropped"
 even though that notification is sent as an OP_READ notification !!! This may be platform-specific, but is
 well known and hopefully should be fixed soon.
 </ul>
<P>
 <h4>Buffer sizes and allocation strategies</h4>
 Because this is java, buffer-overflows are not a security concern. However, in some cases it would improve
 performance to implement a pool of BB's and reuse them (mainly because the cost of instantiating a BB on
 some platforms is considerably higher than instantiating normal classes).
 <P>
 It is usually sufficient for every BB to be the same size in your pool, since you do not know the size of each
 request in advance. However, if you have widely varying request-sizes (or widely varying bandwidth of clients)
 you can use a multi-stage buffering system. You read in a request into a small buffer of fixed size, and your
 protocol indicates how big the rest of the request is going to be. Then you choose/allocate a second buffer
 to receive the rest of the request. This works well if your protocol is constrained to using a fixed number of
 bytes for the first part of the request, so that you can read exactly that many bytes into the small BB.
<P>

<P>
<DL>
<DT><B>See Also:</B><DD><CODE>GlobalErrorLoggingThreadGroup</CODE>, 
<A HREF="../../../../net/tmachine/gpg4/gameserver/FourThreadWebserver.html" title="class in net.tmachine.gpg4.gameserver"><CODE>FourThreadWebserver</CODE></A></DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Field Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.nio.charset.Charset</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#localCharset">localCharset</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../net/tmachine/gpg4/gameserver/iWebserver.html" title="interface in net.tmachine.gpg4.gameserver">iWebserver</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#mainServer">mainServer</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.Thread</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#myself">myself</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.LinkedList</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#pendingRegistrations">pendingRegistrations</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../net/tmachine/gpg4/gameserver/iRequestProcessor.html" title="interface in net.tmachine.gpg4.gameserver">iRequestProcessor</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#processingStage">processingStage</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../net/tmachine/gpg4/gameserver/iResponseWriter.html" title="interface in net.tmachine.gpg4.gameserver">iResponseWriter</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#responseWriter">responseWriter</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#running">running</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.nio.channels.Selector</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#selector">selector</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#verboseConnects">verboseConnects</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#verboseQueueStatus">verboseQueueStatus</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#verboseReads">verboseReads</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected </CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#ReadableSelectorHandler(net.tmachine.gpg4.gameserver.iWebserver, net.tmachine.gpg4.gameserver.iResponseWriter, java.nio.charset.Charset, net.tmachine.gpg4.gameserver.iRequestProcessor)">ReadableSelectorHandler</A></B>(<A HREF="../../../../net/tmachine/gpg4/gameserver/iWebserver.html" title="interface in net.tmachine.gpg4.gameserver">iWebserver</A>&nbsp;ws,
                        <A HREF="../../../../net/tmachine/gpg4/gameserver/iResponseWriter.html" title="interface in net.tmachine.gpg4.gameserver">iResponseWriter</A>&nbsp;wsh,
                        java.nio.charset.Charset&nbsp;ch,
                        <A HREF="../../../../net/tmachine/gpg4/gameserver/iRequestProcessor.html" title="interface in net.tmachine.gpg4.gameserver">iRequestProcessor</A>&nbsp;rp)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#addToQueue(java.nio.channels.SelectableChannel)">addToQueue</A></B>(java.nio.channels.SelectableChannel&nbsp;sc)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.nio.ByteBuffer</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#createNewInputBuffer()">createNewInputBuffer</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Note: this limits the size of possible requests to 4000 bytes max.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.nio.channels.Selector</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#createSelector()">createSelector</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In most situations, any IOException during this method means a System.exit() is necessary - but it's
 far too dangerous to do that by default, so implementations are expected to re-throw any IOException's
 even if they catch them, unless they can take appropriate behaviour to fix the problem</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#processReadableKey(java.nio.channels.SelectionKey)">processReadableKey</A></B>(java.nio.channels.SelectionKey&nbsp;key)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Detailed explanation.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#run()">run</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../net/tmachine/gpg4/gameserver/ReadableSelectorHandler.html#start()">start</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Field Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="verboseConnects"><!-- --></A><H3>
verboseConnects</H3>
<PRE>
public static final boolean <B>verboseConnects</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#net.tmachine.gpg4.gameserver.ReadableSelectorHandler.verboseConnects">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="verboseReads"><!-- --></A><H3>
verboseReads</H3>
<PRE>
public static final boolean <B>verboseReads</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#net.tmachine.gpg4.gameserver.ReadableSelectorHandler.verboseReads">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="verboseQueueStatus"><!-- --></A><H3>
verboseQueueStatus</H3>
<PRE>
public static final boolean <B>verboseQueueStatus</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#net.tmachine.gpg4.gameserver.ReadableSelectorHandler.verboseQueueStatus">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="mainServer"><!-- --></A><H3>
mainServer</H3>
<PRE>
protected <A HREF="../../../../net/tmachine/gpg4/gameserver/iWebserver.html" title="interface in net.tmachine.gpg4.gameserver">iWebserver</A> <B>mainServer</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="myself"><!-- --></A><H3>
myself</H3>
<PRE>
protected java.lang.Thread <B>myself</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="selector"><!-- --></A><H3>
selector</H3>
<PRE>
protected java.nio.channels.Selector <B>selector</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="localCharset"><!-- --></A><H3>
localCharset</H3>
<PRE>
protected java.nio.charset.Charset <B>localCharset</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="responseWriter"><!-- --></A><H3>
responseWriter</H3>
<PRE>
protected <A HREF="../../../../net/tmachine/gpg4/gameserver/iResponseWriter.html" title="interface in net.tmachine.gpg4.gameserver">iResponseWriter</A> <B>responseWriter</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="pendingRegistrations"><!-- --></A><H3>
pendingRegistrations</H3>
<PRE>
protected java.util.LinkedList <B>pendingRegistrations</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="processingStage"><!-- --></A><H3>
processingStage</H3>
<PRE>
protected <A HREF="../../../../net/tmachine/gpg4/gameserver/iRequestProcessor.html" title="interface in net.tmachine.gpg4.gameserver">iRequestProcessor</A> <B>processingStage</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="running"><!-- --></A><H3>
running</H3>
<PRE>
protected boolean <B>running</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="ReadableSelectorHandler(net.tmachine.gpg4.gameserver.iWebserver, net.tmachine.gpg4.gameserver.iResponseWriter, java.nio.charset.Charset, net.tmachine.gpg4.gameserver.iRequestProcessor)"><!-- --></A><H3>
ReadableSelectorHandler</H3>
<PRE>
protected <B>ReadableSelectorHandler</B>(<A HREF="../../../../net/tmachine/gpg4/gameserver/iWebserver.html" title="interface in net.tmachine.gpg4.gameserver">iWebserver</A>&nbsp;ws,
                                  <A HREF="../../../../net/tmachine/gpg4/gameserver/iResponseWriter.html" title="interface in net.tmachine.gpg4.gameserver">iResponseWriter</A>&nbsp;wsh,
                                  java.nio.charset.Charset&nbsp;ch,
                                  <A HREF="../../../../net/tmachine/gpg4/gameserver/iRequestProcessor.html" title="interface in net.tmachine.gpg4.gameserver">iRequestProcessor</A>&nbsp;rp)</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="createSelector()"><!-- --></A><H3>
createSelector</H3>
<PRE>
public java.nio.channels.Selector <B>createSelector</B>()
                                          throws java.io.IOException</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../net/tmachine/gpg4/gameserver/iSelectorHandler.html" title="interface in net.tmachine.gpg4.gameserver">iSelectorHandler</A></CODE></B></DD>
<DD>In most situations, any IOException during this method means a System.exit() is necessary - but it's
 far too dangerous to do that by default, so implementations are expected to re-throw any IOException's
 even if they catch them, unless they can take appropriate behaviour to fix the problem
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../net/tmachine/gpg4/gameserver/iSelectorHandler.html#createSelector()">createSelector</A></CODE> in interface <CODE><A HREF="../../../../net/tmachine/gpg4/gameserver/iSelectorHandler.html" title="interface in net.tmachine.gpg4.gameserver">iSelectorHandler</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="addToQueue(java.nio.channels.SelectableChannel)"><!-- --></A><H3>
addToQueue</H3>
<PRE>
public void <B>addToQueue</B>(java.nio.channels.SelectableChannel&nbsp;sc)</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../net/tmachine/gpg4/gameserver/iReadableSelectorHandler.html#addToQueue(java.nio.channels.SelectableChannel)">addToQueue</A></CODE> in interface <CODE><A HREF="../../../../net/tmachine/gpg4/gameserver/iReadableSelectorHandler.html" title="interface in net.tmachine.gpg4.gameserver">iReadableSelectorHandler</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="start()"><!-- --></A><H3>
start</H3>
<PRE>
public void <B>start</B>()</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../net/tmachine/gpg4/gameserver/iSelectorHandler.html#start()">start</A></CODE> in interface <CODE><A HREF="../../../../net/tmachine/gpg4/gameserver/iSelectorHandler.html" title="interface in net.tmachine.gpg4.gameserver">iSelectorHandler</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="run()"><!-- --></A><H3>
run</H3>
<PRE>
public void <B>run</B>()</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>run</CODE> in interface <CODE>java.lang.Runnable</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="processReadableKey(java.nio.channels.SelectionKey)"><!-- --></A><H3>
processReadableKey</H3>
<PRE>
protected void <B>processReadableKey</B>(java.nio.channels.SelectionKey&nbsp;key)
                           throws java.io.IOException</PRE>
<DL>
<DD>Detailed explanation.
 <P>
 Each SelectionKey can have a single Object attached to it. Since a SelectionKey represents a single SocketChannel
 registered with a single Selector, that Object is usually used to record partially-read data from the SocketChannel
 (or partially written, if your Selector registration is for writing).
 <P>
 <ol>
 <li> Fetch the current attachment.
 <li> If it's null, create a new ByteBuffer (and attach it for future use)
 <li> Otherwise, make sure the whole of the BB is available (limit == capacity) - necessary because everytime
 you read into the BB, the limit gets temporarily altered to indicate how much data was read
 <li> Convert the contents of the BB into a String, using a Charset
 <li> Test if that String contains AT LEAST ONE complete request, using whatever protocol-specific classes/methods are available
 <li> Use protocol-specific means to decide which span of data in the BB represented a full request, and remove it from the BB
 <li> (repeat until there are no requests left in the BB)
 </ol>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createNewInputBuffer()"><!-- --></A><H3>
createNewInputBuffer</H3>
<PRE>
public java.nio.ByteBuffer <B>createNewInputBuffer</B>()</PRE>
<DL>
<DD>Note: this limits the size of possible requests to 4000 bytes max.
 <P>
 C.f. the comments at the head of this class
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../net/tmachine/gpg4/gameserver/PlainWritableSelectorHandler.html" title="class in net.tmachine.gpg4.gameserver"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../net/tmachine/gpg4/gameserver/RequestProcessor.html" title="class in net.tmachine.gpg4.gameserver"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ReadableSelectorHandler.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
